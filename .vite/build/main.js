"use strict";var lt=Object.defineProperty;var ut=(f,a,i)=>a in f?lt(f,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):f[a]=i;var y=(f,a,i)=>ut(f,typeof a!="symbol"?a+"":a,i);const O=require("electron"),ge=require("node:path"),A=require("path"),Qe=require("child_process"),ft=require("tty"),Ze=require("util"),D=require("fs"),pt=require("net"),j=require("os"),Xe=require("events"),ht=require("http"),dt=require("https");function Ke(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var pe={exports:{}},_={exports:{}},$={exports:{}},x,ye;function gt(){if(ye)return x;ye=1;var f=1e3,a=f*60,i=a*60,c=i*24,o=c*365.25;x=function(n,l){l=l||{};var u=typeof n;if(u==="string"&&n.length>0)return r(n);if(u==="number"&&isNaN(n)===!1)return l.long?t(n):e(n);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(n))};function r(n){if(n=String(n),!(n.length>100)){var l=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(n);if(l){var u=parseFloat(l[1]),p=(l[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return u*o;case"days":case"day":case"d":return u*c;case"hours":case"hour":case"hrs":case"hr":case"h":return u*i;case"minutes":case"minute":case"mins":case"min":case"m":return u*a;case"seconds":case"second":case"secs":case"sec":case"s":return u*f;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}}}function e(n){return n>=c?Math.round(n/c)+"d":n>=i?Math.round(n/i)+"h":n>=a?Math.round(n/a)+"m":n>=f?Math.round(n/f)+"s":n+"ms"}function t(n){return s(n,c,"day")||s(n,i,"hour")||s(n,a,"minute")||s(n,f,"second")||n+" ms"}function s(n,l,u){if(!(n<l))return n<l*1.5?Math.floor(n/l)+" "+u:Math.ceil(n/l)+" "+u+"s"}return x}var ve;function et(){return ve||(ve=1,function(f,a){a=f.exports=o.debug=o.default=o,a.coerce=s,a.disable=e,a.enable=r,a.enabled=t,a.humanize=gt(),a.names=[],a.skips=[],a.formatters={};var i;function c(n){var l=0,u;for(u in n)l=(l<<5)-l+n.charCodeAt(u),l|=0;return a.colors[Math.abs(l)%a.colors.length]}function o(n){function l(){if(l.enabled){var u=l,p=+new Date,h=p-(i||p);u.diff=h,u.prev=i,u.curr=p,i=p;for(var d=new Array(arguments.length),v=0;v<d.length;v++)d[v]=arguments[v];d[0]=a.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");var g=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,function(E,q){if(E==="%%")return E;g++;var P=a.formatters[q];if(typeof P=="function"){var b=d[g];E=P.call(u,b),d.splice(g,1),g--}return E}),a.formatArgs.call(u,d);var m=l.log||a.log||console.log.bind(console);m.apply(u,d)}}return l.namespace=n,l.enabled=a.enabled(n),l.useColors=a.useColors(),l.color=c(n),typeof a.init=="function"&&a.init(l),l}function r(n){a.save(n),a.names=[],a.skips=[];for(var l=(typeof n=="string"?n:"").split(/[\s,]+/),u=l.length,p=0;p<u;p++)l[p]&&(n=l[p].replace(/\*/g,".*?"),n[0]==="-"?a.skips.push(new RegExp("^"+n.substr(1)+"$")):a.names.push(new RegExp("^"+n+"$")))}function e(){a.enable("")}function t(n){var l,u;for(l=0,u=a.skips.length;l<u;l++)if(a.skips[l].test(n))return!1;for(l=0,u=a.names.length;l<u;l++)if(a.names[l].test(n))return!0;return!1}function s(n){return n instanceof Error?n.stack||n.message:n}}($,$.exports)),$.exports}var me;function yt(){return me||(me=1,function(f,a){a=f.exports=et(),a.log=o,a.formatArgs=c,a.save=r,a.load=e,a.useColors=i,a.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:t(),a.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function i(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}a.formatters.j=function(s){try{return JSON.stringify(s)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}};function c(s){var n=this.useColors;if(s[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+s[0]+(n?"%c ":" ")+"+"+a.humanize(this.diff),!!n){var l="color: "+this.color;s.splice(1,0,l,"color: inherit");var u=0,p=0;s[0].replace(/%[a-zA-Z%]/g,function(h){h!=="%%"&&(u++,h==="%c"&&(p=u))}),s.splice(p,0,l)}}function o(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function r(s){try{s==null?a.storage.removeItem("debug"):a.storage.debug=s}catch{}}function e(){var s;try{s=a.storage.debug}catch{}return!s&&typeof process<"u"&&"env"in process&&(s=process.env.DEBUG),s}a.enable(e());function t(){try{return window.localStorage}catch{}}}(_,_.exports)),_.exports}var C={exports:{}},be;function vt(){return be||(be=1,function(f,a){var i=ft,c=Ze;a=f.exports=et(),a.init=p,a.log=s,a.formatArgs=t,a.save=n,a.load=l,a.useColors=e,a.colors=[6,2,3,4,5,1],a.inspectOpts=Object.keys(process.env).filter(function(h){return/^debug_/i.test(h)}).reduce(function(h,d){var v=d.substring(6).toLowerCase().replace(/_([a-z])/g,function(m,E){return E.toUpperCase()}),g=process.env[d];return/^(yes|on|true|enabled)$/i.test(g)?g=!0:/^(no|off|false|disabled)$/i.test(g)?g=!1:g==="null"?g=null:g=Number(g),h[v]=g,h},{});var o=parseInt(process.env.DEBUG_FD,10)||2;o!==1&&o!==2&&c.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var r=o===1?process.stdout:o===2?process.stderr:u(o);function e(){return"colors"in a.inspectOpts?!!a.inspectOpts.colors:i.isatty(o)}a.formatters.o=function(h){return this.inspectOpts.colors=this.useColors,c.inspect(h,this.inspectOpts).split(`
`).map(function(d){return d.trim()}).join(" ")},a.formatters.O=function(h){return this.inspectOpts.colors=this.useColors,c.inspect(h,this.inspectOpts)};function t(h){var d=this.namespace,v=this.useColors;if(v){var g=this.color,m="  \x1B[3"+g+";1m"+d+" \x1B[0m";h[0]=m+h[0].split(`
`).join(`
`+m),h.push("\x1B[3"+g+"m+"+a.humanize(this.diff)+"\x1B[0m")}else h[0]=new Date().toUTCString()+" "+d+" "+h[0]}function s(){return r.write(c.format.apply(c,arguments)+`
`)}function n(h){h==null?delete process.env.DEBUG:process.env.DEBUG=h}function l(){return process.env.DEBUG}function u(h){var d,v=process.binding("tty_wrap");switch(v.guessHandleType(h)){case"TTY":d=new i.WriteStream(h),d._type="tty",d._handle&&d._handle.unref&&d._handle.unref();break;case"FILE":var g=D;d=new g.SyncWriteStream(h,{autoClose:!1}),d._type="fs";break;case"PIPE":case"TCP":var m=pt;d=new m.Socket({fd:h,readable:!1,writable:!0}),d.readable=!1,d.read=null,d._type="pipe",d._handle&&d._handle.unref&&d._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return d.fd=h,d._isStdio=!0,d}function p(h){h.inspectOpts={};for(var d=Object.keys(a.inspectOpts),v=0;v<d.length;v++)h.inspectOpts[d[v]]=a.inspectOpts[d[v]]}a.enable(l())}(C,C.exports)),C.exports}typeof process<"u"&&process.type==="renderer"?pe.exports=yt():pe.exports=vt();var mt=pe.exports,he=A,bt=Qe.spawn,tt=mt("electron-squirrel-startup"),I=O.app,we=function(f,a){var i=he.resolve(he.dirname(process.execPath),"..","Update.exe");tt("Spawning `%s` with args `%s`",i,f),bt(i,f,{detached:!0}).on("close",a)},wt=function(){if(process.platform==="win32"){var f=process.argv[1];tt("processing squirrel command `%s`",f);var a=he.basename(process.execPath);if(f==="--squirrel-install"||f==="--squirrel-updated")return we(["--createShortcut="+a],I.quit),!0;if(f==="--squirrel-uninstall")return we(["--removeShortcut="+a],I.quit),!0;if(f==="--squirrel-obsolete")return I.quit(),!0}return!1},Et=wt();const St=Ke(Et);var R={exports:{}},M={exports:{}},Ee;function rt(){return Ee||(Ee=1,function(f){let a={};try{a=require("electron")}catch{}a.ipcRenderer&&i(a),f.exports=i;function i({contextBridge:c,ipcRenderer:o}){if(!o)return;o.on("__ELECTRON_LOG_IPC__",(e,t)=>{window.postMessage({cmd:"message",...t})}),o.invoke("__ELECTRON_LOG__",{cmd:"getOptions"}).catch(e=>console.error(new Error(`electron-log isn't initialized in the main process. Please call log.initialize() before. ${e.message}`)));const r={sendToMain(e){try{o.send("__ELECTRON_LOG__",e)}catch(t){console.error("electronLog.sendToMain ",t,"data:",e),o.send("__ELECTRON_LOG__",{cmd:"errorHandler",error:{message:t==null?void 0:t.message,stack:t==null?void 0:t.stack},errorName:"sendToMain"})}},log(...e){r.sendToMain({data:e,level:"info"})}};for(const e of["error","warn","info","verbose","debug","silly"])r[e]=(...t)=>r.sendToMain({data:t,level:e});if(c&&process.contextIsolated)try{c.exposeInMainWorld("__electronLog",r)}catch{}typeof window=="object"?window.__electronLog=r:__electronLog=r}}(M)),M.exports}var T={exports:{}},k,Se;function Ot(){if(Se)return k;Se=1,k=f;function f(a){return Object.defineProperties(i,{defaultLabel:{value:"",writable:!0},labelPadding:{value:!0,writable:!0},maxLabelLength:{value:0,writable:!0},labelLength:{get(){switch(typeof i.labelPadding){case"boolean":return i.labelPadding?i.maxLabelLength:0;case"number":return i.labelPadding;default:return 0}}}});function i(c){i.maxLabelLength=Math.max(i.maxLabelLength,c.length);const o={};for(const r of a.levels)o[r]=(...e)=>a.logData(e,{level:r,scope:c});return o.log=o.info,o}}return k}var z,Oe;function At(){if(Oe)return z;Oe=1;class f{constructor({processMessage:i}){this.processMessage=i,this.buffer=[],this.enabled=!1,this.begin=this.begin.bind(this),this.commit=this.commit.bind(this),this.reject=this.reject.bind(this)}addMessage(i){this.buffer.push(i)}begin(){this.enabled=[]}commit(){this.enabled=!1,this.buffer.forEach(i=>this.processMessage(i)),this.buffer=[]}reject(){this.enabled=!1,this.buffer=[]}}return z=f,z}var W,Ae;function nt(){if(Ae)return W;Ae=1;const f=Ot(),a=At(),c=class c{constructor({allowUnknownLevel:r=!1,dependencies:e={},errorHandler:t,eventLogger:s,initializeFn:n,isDev:l=!1,levels:u=["error","warn","info","verbose","debug","silly"],logId:p,transportFactories:h={},variables:d}={}){y(this,"dependencies",{});y(this,"errorHandler",null);y(this,"eventLogger",null);y(this,"functions",{});y(this,"hooks",[]);y(this,"isDev",!1);y(this,"levels",null);y(this,"logId",null);y(this,"scope",null);y(this,"transports",{});y(this,"variables",{});this.addLevel=this.addLevel.bind(this),this.create=this.create.bind(this),this.initialize=this.initialize.bind(this),this.logData=this.logData.bind(this),this.processMessage=this.processMessage.bind(this),this.allowUnknownLevel=r,this.buffering=new a(this),this.dependencies=e,this.initializeFn=n,this.isDev=l,this.levels=u,this.logId=p,this.scope=f(this),this.transportFactories=h,this.variables=d||{};for(const v of this.levels)this.addLevel(v,!1);this.log=this.info,this.functions.log=this.log,this.errorHandler=t,t==null||t.setOptions({...e,logFn:this.error}),this.eventLogger=s,s==null||s.setOptions({...e,logger:this});for(const[v,g]of Object.entries(h))this.transports[v]=g(this,e);c.instances[p]=this}static getInstance({logId:r}){return this.instances[r]||this.instances.default}addLevel(r,e=this.levels.length){e!==!1&&this.levels.splice(e,0,r),this[r]=(...t)=>this.logData(t,{level:r}),this.functions[r]=this[r]}catchErrors(r){return this.processMessage({data:["log.catchErrors is deprecated. Use log.errorHandler instead"],level:"warn"},{transports:["console"]}),this.errorHandler.startCatching(r)}create(r){return typeof r=="string"&&(r={logId:r}),new c({dependencies:this.dependencies,errorHandler:this.errorHandler,initializeFn:this.initializeFn,isDev:this.isDev,transportFactories:this.transportFactories,variables:{...this.variables},...r})}compareLevels(r,e,t=this.levels){const s=t.indexOf(r),n=t.indexOf(e);return n===-1||s===-1?!0:n<=s}initialize(r={}){this.initializeFn({logger:this,...this.dependencies,...r})}logData(r,e={}){this.buffering.enabled?this.buffering.addMessage({data:r,date:new Date,...e}):this.processMessage({data:r,...e})}processMessage(r,{transports:e=this.transports}={}){if(r.cmd==="errorHandler"){this.errorHandler.handle(r.error,{errorName:r.errorName,processType:"renderer",showDialog:!!r.showDialog});return}let t=r.level;this.allowUnknownLevel||(t=this.levels.includes(r.level)?r.level:"info");const s={date:new Date,logId:this.logId,...r,level:t,variables:{...this.variables,...r.variables}};for(const[n,l]of this.transportEntries(e))if(!(typeof l!="function"||l.level===!1)&&this.compareLevels(l.level,r.level))try{const u=this.hooks.reduce((p,h)=>p&&h(p,l,n),s);u&&l({...u,data:[...u.data]})}catch(u){this.processInternalErrorFn(u)}}processInternalErrorFn(r){}transportEntries(r=this.transports){return(Array.isArray(r)?r:Object.entries(r)).map(t=>{switch(typeof t){case"string":return this.transports[t]?[t,this.transports[t]]:null;case"function":return[t.name,t];default:return Array.isArray(t)?t:null}}).filter(Boolean)}};y(c,"instances",{});let i=c;return W=i,W}var U,Le;function Lt(){if(Le)return U;Le=1;const f=console.error;class a{constructor({logFn:c=null}={}){y(this,"logFn",null);y(this,"onError",null);y(this,"showDialog",!1);y(this,"preventDefault",!0);this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.startCatching=this.startCatching.bind(this),this.logFn=c}handle(c,{logFn:o=this.logFn,errorName:r="",onError:e=this.onError,showDialog:t=this.showDialog}={}){try{(e==null?void 0:e({error:c,errorName:r,processType:"renderer"}))!==!1&&o({error:c,errorName:r,showDialog:t})}catch{f(c)}}setOptions({logFn:c,onError:o,preventDefault:r,showDialog:e}){typeof c=="function"&&(this.logFn=c),typeof o=="function"&&(this.onError=o),typeof r=="boolean"&&(this.preventDefault=r),typeof e=="boolean"&&(this.showDialog=e)}startCatching({onError:c,showDialog:o}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:c,showDialog:o}),window.addEventListener("error",r=>{var e;this.preventDefault&&((e=r.preventDefault)==null||e.call(r)),this.handleError(r.error||r)}),window.addEventListener("unhandledrejection",r=>{var e;this.preventDefault&&((e=r.preventDefault)==null||e.call(r)),this.handleRejection(r.reason||r)}))}handleError(c){this.handle(c,{errorName:"Unhandled"})}handleRejection(c){const o=c instanceof Error?c:new Error(JSON.stringify(c));this.handle(o,{errorName:"Unhandled rejection"})}}return U=a,U}var B,Fe;function L(){if(Fe)return B;Fe=1,B={transform:f};function f({logger:a,message:i,transport:c,initialData:o=(i==null?void 0:i.data)||[],transforms:r=c==null?void 0:c.transforms}){return r.reduce((e,t)=>typeof t=="function"?t({data:e,logger:a,message:i,transport:c}):e,o)}return B}var J,De;function Ft(){if(De)return J;De=1;const{transform:f}=L();J=i;const a={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};function i(o){return Object.assign(r,{format:"{h}:{i}:{s}.{ms}{scope} › {text}",transforms:[c],writeFn({message:{level:e,data:t}}){const s=a[e]||a.info;setTimeout(()=>s(...t))}});function r(e){r.writeFn({message:{...e,data:f({logger:o,message:e,transport:r})}})}}function c({data:o=[],logger:r={},message:e={},transport:t={}}){if(typeof t.format=="function")return t.format({data:o,level:(e==null?void 0:e.level)||"info",logger:r,message:e,transport:t});if(typeof t.format!="string")return o;o.unshift(t.format),typeof o[1]=="string"&&o[1].match(/%[1cdfiOos]/)&&(o=[`${o[0]}${o[1]}`,...o.slice(2)]);const s=e.date||new Date;return o[0]=o[0].replace(/\{(\w+)}/g,(n,l)=>{var u,p;switch(l){case"level":return e.level;case"logId":return e.logId;case"scope":{const h=e.scope||((u=r.scope)==null?void 0:u.defaultLabel);return h?` (${h})`:""}case"text":return"";case"y":return s.getFullYear().toString(10);case"m":return(s.getMonth()+1).toString(10).padStart(2,"0");case"d":return s.getDate().toString(10).padStart(2,"0");case"h":return s.getHours().toString(10).padStart(2,"0");case"i":return s.getMinutes().toString(10).padStart(2,"0");case"s":return s.getSeconds().toString(10).padStart(2,"0");case"ms":return s.getMilliseconds().toString(10).padStart(3,"0");case"iso":return s.toISOString();default:return((p=e.variables)==null?void 0:p[l])||n}}).trim(),o}return J}var H,qe;function Dt(){if(qe)return H;qe=1;const{transform:f}=L();H=i;const a=new Set([Promise,WeakMap,WeakSet]);function i(r){return Object.assign(e,{depth:5,transforms:[o]});function e(t){if(!window.__electronLog){r.processMessage({data:["electron-log: logger isn't initialized in the main process"],level:"error"},{transports:["console"]});return}try{const s=f({initialData:t,logger:r,message:t,transport:e});__electronLog.sendToMain(s)}catch(s){r.transports.console({data:["electronLog.transports.ipc",s,"data:",t.data],level:"error"})}}}function c(r){return Object(r)!==r}function o({data:r,depth:e,seen:t=new WeakSet,transport:s={}}={}){const n=e||s.depth||5;return t.has(r)?"[Circular]":n<1?c(r)?r:Array.isArray(r)?"[Array]":`[${typeof r}]`:["function","symbol"].includes(typeof r)?r.toString():c(r)?r:a.has(r.constructor)?`[${r.constructor.name}]`:Array.isArray(r)?r.map(l=>o({data:l,depth:n-1,seen:t})):r instanceof Date?r.toISOString():r instanceof Error?r.stack:r instanceof Map?new Map(Array.from(r).map(([l,u])=>[o({data:l,depth:n-1,seen:t}),o({data:u,depth:n-1,seen:t})])):r instanceof Set?new Set(Array.from(r).map(l=>o({data:l,depth:n-1,seen:t}))):(t.add(r),Object.fromEntries(Object.entries(r).map(([l,u])=>[l,o({data:u,depth:n-1,seen:t})])))}return H}var Pe;function qt(){return Pe||(Pe=1,function(f){const a=nt(),i=Lt(),c=Ft(),o=Dt();typeof process=="object"&&process.type==="browser"&&console.warn("electron-log/renderer is loaded in the main process. It could cause unexpected behaviour."),f.exports=r(),f.exports.Logger=a,f.exports.default=f.exports;function r(){const e=new a({allowUnknownLevel:!0,errorHandler:new i,initializeFn:()=>{},logId:"default",transportFactories:{console:c,ipc:o},variables:{processType:"renderer"}});return e.errorHandler.setOptions({logFn({error:t,errorName:s,showDialog:n}){e.transports.console({data:[s,t].filter(Boolean),level:"error"}),e.transports.ipc({cmd:"errorHandler",error:{cause:t==null?void 0:t.cause,code:t==null?void 0:t.code,name:t==null?void 0:t.name,message:t==null?void 0:t.message,stack:t==null?void 0:t.stack},errorName:s,logId:e.logId,showDialog:n})}}),typeof window=="object"&&window.addEventListener("message",t=>{const{cmd:s,logId:n,...l}=t.data||{},u=a.getInstance({logId:n});s==="message"&&u.processMessage(l,{transports:["console"]})}),new Proxy(e,{get(t,s){return typeof t[s]<"u"?t[s]:(...n)=>e.logData(n,{level:s})}})}}(T)),T.exports}var V,_e;function Pt(){if(_e)return V;_e=1;const f=D,a=A;V={findAndReadPackageJson:i,tryReadJsonAt:c};function i(){return c(e())||c(r())||c(process.resourcesPath,"app.asar")||c(process.resourcesPath,"app")||c(process.cwd())||{name:void 0,version:void 0}}function c(...t){if(t[0])try{const s=a.join(...t),n=o("package.json",s);if(!n)return;const l=JSON.parse(f.readFileSync(n,"utf8")),u=(l==null?void 0:l.productName)||(l==null?void 0:l.name);return!u||u.toLowerCase()==="electron"?void 0:u?{name:u,version:l==null?void 0:l.version}:void 0}catch{return}}function o(t,s){let n=s;for(;;){const l=a.parse(n),u=l.root,p=l.dir;if(f.existsSync(a.join(n,t)))return a.resolve(a.join(n,t));if(n===u)return null;n=p}}function r(){const t=process.argv.filter(n=>n.indexOf("--user-data-dir=")===0);return t.length===0||typeof t[0]!="string"?null:t[0].replace("--user-data-dir=","")}function e(){var t;try{return(t=require.main)==null?void 0:t.filename}catch{return}}return V}var G,$e;function st(){if($e)return G;$e=1;const f=Qe,a=j,i=A,c=Pt();class o{constructor(){y(this,"appName");y(this,"appPackageJson");y(this,"platform",process.platform)}getAppLogPath(e=this.getAppName()){return this.platform==="darwin"?i.join(this.getSystemPathHome(),"Library/Logs",e):i.join(this.getAppUserDataPath(e),"logs")}getAppName(){var t;const e=this.appName||((t=this.getAppPackageJson())==null?void 0:t.name);if(!e)throw new Error("electron-log can't determine the app name. It tried these methods:\n1. Use `electron.app.name`\n2. Use productName or name from the nearest package.json`\nYou can also set it through log.transports.file.setAppName()");return e}getAppPackageJson(){return typeof this.appPackageJson!="object"&&(this.appPackageJson=c.findAndReadPackageJson()),this.appPackageJson}getAppUserDataPath(e=this.getAppName()){return e?i.join(this.getSystemPathAppData(),e):void 0}getAppVersion(){var e;return(e=this.getAppPackageJson())==null?void 0:e.version}getElectronLogPath(){return this.getAppLogPath()}getMacOsVersion(){const e=Number(a.release().split(".")[0]);return e<=19?`10.${e-4}`:e-9}getOsVersion(){let e=a.type().replace("_"," "),t=a.release();return e==="Darwin"&&(e="macOS",t=this.getMacOsVersion()),`${e} ${t}`}getPathVariables(){const e=this.getAppName(),t=this.getAppVersion(),s=this;return{appData:this.getSystemPathAppData(),appName:e,appVersion:t,get electronDefaultDir(){return s.getElectronLogPath()},home:this.getSystemPathHome(),libraryDefaultDir:this.getAppLogPath(e),libraryTemplate:this.getAppLogPath("{appName}"),temp:this.getSystemPathTemp(),userData:this.getAppUserDataPath(e)}}getSystemPathAppData(){const e=this.getSystemPathHome();switch(this.platform){case"darwin":return i.join(e,"Library/Application Support");case"win32":return process.env.APPDATA||i.join(e,"AppData/Roaming");default:return process.env.XDG_CONFIG_HOME||i.join(e,".config")}}getSystemPathHome(){var e;return((e=a.homedir)==null?void 0:e.call(a))||process.env.HOME}getSystemPathTemp(){return a.tmpdir()}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:void 0,os:this.getOsVersion()}}isDev(){return process.env.NODE_ENV==="development"||process.env.ELECTRON_IS_DEV==="1"}isElectron(){return!!process.versions.electron}onAppEvent(e,t){}onAppReady(e){e()}onEveryWebContentsEvent(e,t){}onIpc(e,t){}onIpcInvoke(e,t){}openUrl(e,t=console.error){const n={darwin:"open",win32:"start",linux:"xdg-open"}[process.platform]||"xdg-open";f.exec(`${n} ${e}`,{},l=>{l&&t(l)})}setAppName(e){this.appName=e}setPlatform(e){this.platform=e}setPreloadFileForSessions({filePath:e,includeFutureSession:t=!0,getSessions:s=()=>[]}){}sendIpc(e,t){}showErrorBox(e,t){}}return G=o,G}var Y,Ce;function _t(){if(Ce)return Y;Ce=1;const f=A,a=st();class i extends a{constructor({electron:r}={}){super();y(this,"electron");this.electron=r}getAppName(){var e,t;let r;try{r=this.appName||((e=this.electron.app)==null?void 0:e.name)||((t=this.electron.app)==null?void 0:t.getName())}catch{}return r||super.getAppName()}getAppUserDataPath(r){return this.getPath("userData")||super.getAppUserDataPath(r)}getAppVersion(){var e;let r;try{r=(e=this.electron.app)==null?void 0:e.getVersion()}catch{}return r||super.getAppVersion()}getElectronLogPath(){return this.getPath("logs")||super.getElectronLogPath()}getPath(r){var e;try{return(e=this.electron.app)==null?void 0:e.getPath(r)}catch{return}}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:`Electron ${process.versions.electron}`,os:this.getOsVersion()}}getSystemPathAppData(){return this.getPath("appData")||super.getSystemPathAppData()}isDev(){var r;return((r=this.electron.app)==null?void 0:r.isPackaged)!==void 0?!this.electron.app.isPackaged:typeof process.execPath=="string"?f.basename(process.execPath).toLowerCase().startsWith("electron"):super.isDev()}onAppEvent(r,e){var t;return(t=this.electron.app)==null||t.on(r,e),()=>{var s;(s=this.electron.app)==null||s.off(r,e)}}onAppReady(r){var e,t,s;(e=this.electron.app)!=null&&e.isReady()?r():(t=this.electron.app)!=null&&t.once?(s=this.electron.app)==null||s.once("ready",r):r()}onEveryWebContentsEvent(r,e){var s,n,l;return(n=(s=this.electron.webContents)==null?void 0:s.getAllWebContents())==null||n.forEach(u=>{u.on(r,e)}),(l=this.electron.app)==null||l.on("web-contents-created",t),()=>{var u,p;(u=this.electron.webContents)==null||u.getAllWebContents().forEach(h=>{h.off(r,e)}),(p=this.electron.app)==null||p.off("web-contents-created",t)};function t(u,p){p.on(r,e)}}onIpc(r,e){var t;(t=this.electron.ipcMain)==null||t.on(r,e)}onIpcInvoke(r,e){var t,s;(s=(t=this.electron.ipcMain)==null?void 0:t.handle)==null||s.call(t,r,e)}openUrl(r,e=console.error){var t;(t=this.electron.shell)==null||t.openExternal(r).catch(e)}setPreloadFileForSessions({filePath:r,includeFutureSession:e=!0,getSessions:t=()=>{var s;return[(s=this.electron.session)==null?void 0:s.defaultSession]}}){for(const n of t().filter(Boolean))s(n);e&&this.onAppEvent("session-created",n=>{s(n)});function s(n){typeof n.registerPreloadScript=="function"?n.registerPreloadScript({filePath:r,id:"electron-log-preload",type:"frame"}):n.setPreloads([...n.getPreloads(),r])}}sendIpc(r,e){var t,s;(s=(t=this.electron.BrowserWindow)==null?void 0:t.getAllWindows())==null||s.forEach(n=>{var l,u;((l=n.webContents)==null?void 0:l.isDestroyed())===!1&&((u=n.webContents)==null?void 0:u.isCrashed())===!1&&n.webContents.send(r,e)})}showErrorBox(r,e){var t;(t=this.electron.dialog)==null||t.showErrorBox(r,e)}}return Y=i,Y}var Q,Re;function $t(){if(Re)return Q;Re=1;const f=D,a=j,i=A,c=rt();let o=!1,r=!1;Q={initialize({externalApi:s,getSessions:n,includeFutureSession:l,logger:u,preload:p=!0,spyRendererConsole:h=!1}){s.onAppReady(()=>{try{p&&e({externalApi:s,getSessions:n,includeFutureSession:l,logger:u,preloadOption:p}),h&&t({externalApi:s,logger:u})}catch(d){u.warn(d)}})}};function e({externalApi:s,getSessions:n,includeFutureSession:l,logger:u,preloadOption:p}){let h=typeof p=="string"?p:void 0;if(o){u.warn(new Error("log.initialize({ preload }) already called").stack);return}o=!0;try{h=i.resolve(__dirname,"../renderer/electron-log-preload.js")}catch{}if(!h||!f.existsSync(h)){h=i.join(s.getAppUserDataPath()||a.tmpdir(),"electron-log-preload.js");const d=`
      try {
        (${c.toString()})(require('electron'));
      } catch(e) {
        console.error(e);
      }
    `;f.writeFileSync(h,d,"utf8")}s.setPreloadFileForSessions({filePath:h,includeFutureSession:l,getSessions:n})}function t({externalApi:s,logger:n}){if(r){n.warn(new Error("log.initialize({ spyRendererConsole }) already called").stack);return}r=!0;const l=["debug","info","warn","error"];s.onEveryWebContentsEvent("console-message",(u,p,h)=>{n.processMessage({data:[h],level:l[p],variables:{processType:"renderer"}})})}return Q}var Z,je;function Ct(){if(je)return Z;je=1;class f{constructor({externalApi:c,logFn:o=void 0,onError:r=void 0,showDialog:e=void 0}={}){y(this,"externalApi");y(this,"isActive",!1);y(this,"logFn");y(this,"onError");y(this,"showDialog",!0);this.createIssue=this.createIssue.bind(this),this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.setOptions({externalApi:c,logFn:o,onError:r,showDialog:e}),this.startCatching=this.startCatching.bind(this),this.stopCatching=this.stopCatching.bind(this)}handle(c,{logFn:o=this.logFn,onError:r=this.onError,processType:e="browser",showDialog:t=this.showDialog,errorName:s=""}={}){var n;c=a(c);try{if(typeof r=="function"){const l=((n=this.externalApi)==null?void 0:n.getVersions())||{},u=this.createIssue;if(r({createIssue:u,error:c,errorName:s,processType:e,versions:l})===!1)return}s?o(s,c):o(c),t&&!s.includes("rejection")&&this.externalApi&&this.externalApi.showErrorBox(`A JavaScript error occurred in the ${e} process`,c.stack)}catch{console.error(c)}}setOptions({externalApi:c,logFn:o,onError:r,showDialog:e}){typeof c=="object"&&(this.externalApi=c),typeof o=="function"&&(this.logFn=o),typeof r=="function"&&(this.onError=r),typeof e=="boolean"&&(this.showDialog=e)}startCatching({onError:c,showDialog:o}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:c,showDialog:o}),process.on("uncaughtException",this.handleError),process.on("unhandledRejection",this.handleRejection))}stopCatching(){this.isActive=!1,process.removeListener("uncaughtException",this.handleError),process.removeListener("unhandledRejection",this.handleRejection)}createIssue(c,o){var r;(r=this.externalApi)==null||r.openUrl(`${c}?${new URLSearchParams(o).toString()}`)}handleError(c){this.handle(c,{errorName:"Unhandled"})}handleRejection(c){const o=c instanceof Error?c:new Error(JSON.stringify(c));this.handle(o,{errorName:"Unhandled rejection"})}}function a(i){if(i instanceof Error)return i;if(i&&typeof i=="object"){if(i.message)return Object.assign(new Error(i.message),i);try{return new Error(JSON.stringify(i))}catch(c){return new Error(`Couldn't normalize error ${String(i)}: ${c}`)}}return new Error(`Can't normalize error ${String(i)}`)}return Z=f,Z}var X,Ne;function Rt(){if(Ne)return X;Ne=1;class f{constructor(i={}){y(this,"disposers",[]);y(this,"format","{eventSource}#{eventName}:");y(this,"formatters",{app:{"certificate-error":({args:i})=>this.arrayToObject(i.slice(1,4),["url","error","certificate"]),"child-process-gone":({args:i})=>i.length===1?i[0]:i,"render-process-gone":({args:[i,c]})=>c&&typeof c=="object"?{...c,...this.getWebContentsDetails(i)}:[]},webContents:{"console-message":({args:[i,c,o,r]})=>{if(!(i<3))return{message:c,source:`${r}:${o}`}},"did-fail-load":({args:i})=>this.arrayToObject(i,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"did-fail-provisional-load":({args:i})=>this.arrayToObject(i,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"plugin-crashed":({args:i})=>this.arrayToObject(i,["name","version"]),"preload-error":({args:i})=>this.arrayToObject(i,["preloadPath","error"])}});y(this,"events",{app:{"certificate-error":!0,"child-process-gone":!0,"render-process-gone":!0},webContents:{"did-fail-load":!0,"did-fail-provisional-load":!0,"plugin-crashed":!0,"preload-error":!0,unresponsive:!0}});y(this,"externalApi");y(this,"level","error");y(this,"scope","");this.setOptions(i)}setOptions({events:i,externalApi:c,level:o,logger:r,format:e,formatters:t,scope:s}){typeof i=="object"&&(this.events=i),typeof c=="object"&&(this.externalApi=c),typeof o=="string"&&(this.level=o),typeof r=="object"&&(this.logger=r),(typeof e=="string"||typeof e=="function")&&(this.format=e),typeof t=="object"&&(this.formatters=t),typeof s=="string"&&(this.scope=s)}startLogging(i={}){this.setOptions(i),this.disposeListeners();for(const c of this.getEventNames(this.events.app))this.disposers.push(this.externalApi.onAppEvent(c,(...o)=>{this.handleEvent({eventSource:"app",eventName:c,handlerArgs:o})}));for(const c of this.getEventNames(this.events.webContents))this.disposers.push(this.externalApi.onEveryWebContentsEvent(c,(...o)=>{this.handleEvent({eventSource:"webContents",eventName:c,handlerArgs:o})}))}stopLogging(){this.disposeListeners()}arrayToObject(i,c){const o={};return c.forEach((r,e)=>{o[r]=i[e]}),i.length>c.length&&(o.unknownArgs=i.slice(c.length)),o}disposeListeners(){this.disposers.forEach(i=>i()),this.disposers=[]}formatEventLog({eventName:i,eventSource:c,handlerArgs:o}){var u;const[r,...e]=o;if(typeof this.format=="function")return this.format({args:e,event:r,eventName:i,eventSource:c});const t=(u=this.formatters[c])==null?void 0:u[i];let s=e;if(typeof t=="function"&&(s=t({args:e,event:r,eventName:i,eventSource:c})),!s)return;const n={};return Array.isArray(s)?n.args=s:typeof s=="object"&&Object.assign(n,s),c==="webContents"&&Object.assign(n,this.getWebContentsDetails(r==null?void 0:r.sender)),[this.format.replace("{eventSource}",c==="app"?"App":"WebContents").replace("{eventName}",i),n]}getEventNames(i){return!i||typeof i!="object"?[]:Object.entries(i).filter(([c,o])=>o).map(([c])=>c)}getWebContentsDetails(i){if(!(i!=null&&i.loadURL))return{};try{return{webContents:{id:i.id,url:i.getURL()}}}catch{return{}}}handleEvent({eventName:i,eventSource:c,handlerArgs:o}){var e;const r=this.formatEventLog({eventName:i,eventSource:c,handlerArgs:o});if(r){const t=this.scope?this.logger.scope(this.scope):this.logger;(e=t==null?void 0:t[this.level])==null||e.call(t,...r)}}}return X=f,X}var K,xe;function it(){if(xe)return K;xe=1;const{transform:f}=L();K={concatFirstStringElements:a,formatScope:c,formatText:r,formatVariables:o,timeZoneFromOffset:i,format({message:e,logger:t,transport:s,data:n=e==null?void 0:e.data}){switch(typeof s.format){case"string":return f({message:e,logger:t,transforms:[o,c,r],transport:s,initialData:[s.format,...n]});case"function":return s.format({data:n,level:(e==null?void 0:e.level)||"info",logger:t,message:e,transport:s});default:return n}}};function a({data:e}){return typeof e[0]!="string"||typeof e[1]!="string"||e[0].match(/%[1cdfiOos]/)?e:[`${e[0]} ${e[1]}`,...e.slice(2)]}function i(e){const t=Math.abs(e),s=e>0?"-":"+",n=Math.floor(t/60).toString().padStart(2,"0"),l=(t%60).toString().padStart(2,"0");return`${s}${n}:${l}`}function c({data:e,logger:t,message:s}){const{defaultLabel:n,labelLength:l}=(t==null?void 0:t.scope)||{},u=e[0];let p=s.scope;p||(p=n);let h;return p===""?h=l>0?"".padEnd(l+3):"":typeof p=="string"?h=` (${p})`.padEnd(l+3):h="",e[0]=u.replace("{scope}",h),e}function o({data:e,message:t}){let s=e[0];if(typeof s!="string")return e;s=s.replace("{level}]",`${t.level}]`.padEnd(6," "));const n=t.date||new Date;return e[0]=s.replace(/\{(\w+)}/g,(l,u)=>{var p;switch(u){case"level":return t.level||"info";case"logId":return t.logId;case"y":return n.getFullYear().toString(10);case"m":return(n.getMonth()+1).toString(10).padStart(2,"0");case"d":return n.getDate().toString(10).padStart(2,"0");case"h":return n.getHours().toString(10).padStart(2,"0");case"i":return n.getMinutes().toString(10).padStart(2,"0");case"s":return n.getSeconds().toString(10).padStart(2,"0");case"ms":return n.getMilliseconds().toString(10).padStart(3,"0");case"z":return i(n.getTimezoneOffset());case"iso":return n.toISOString();default:return((p=t.variables)==null?void 0:p[u])||l}}).trim(),e}function r({data:e}){const t=e[0];if(typeof t!="string")return e;if(t.lastIndexOf("{text}")===t.length-6)return e[0]=t.replace(/\s?{text}/,""),e[0]===""&&e.shift(),e;const n=t.split("{text}");let l=[];return n[0]!==""&&l.push(n[0]),l=l.concat(e.slice(1)),n[1]!==""&&l.push(n[1]),l}return K}var ee={exports:{}},Ie;function N(){return Ie||(Ie=1,function(f){const a=Ze;f.exports={serialize:c,maxDepth({data:o,transport:r,depth:e=(r==null?void 0:r.depth)??6}){if(!o)return o;if(e<1)return Array.isArray(o)?"[array]":typeof o=="object"&&o?"[object]":o;if(Array.isArray(o))return o.map(s=>f.exports.maxDepth({data:s,depth:e-1}));if(typeof o!="object"||o&&typeof o.toISOString=="function")return o;if(o===null)return null;if(o instanceof Error)return o;const t={};for(const s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=f.exports.maxDepth({data:o[s],depth:e-1}));return t},toJSON({data:o}){return JSON.parse(JSON.stringify(o,i()))},toString({data:o,transport:r}){const e=(r==null?void 0:r.inspectOptions)||{},t=o.map(s=>{if(s!==void 0)try{const n=JSON.stringify(s,i(),"  ");return n===void 0?void 0:JSON.parse(n)}catch{return s}});return a.formatWithOptions(e,...t)}};function i(o={}){const r=new WeakSet;return function(e,t){if(typeof t=="object"&&t!==null){if(r.has(t))return;r.add(t)}return c(e,t,o)}}function c(o,r,e={}){const t=(e==null?void 0:e.serializeMapAndSet)!==!1;return r instanceof Error?r.stack:r&&(typeof r=="function"?`[function] ${r.toString()}`:r instanceof Date?r.toISOString():t&&r instanceof Map&&Object.fromEntries?Object.fromEntries(r):t&&r instanceof Set&&Array.from?Array.from(r):r)}}(ee)),ee.exports}var te,Me;function de(){if(Me)return te;Me=1,te={transformStyles:c,applyAnsiStyles({data:o}){return c(o,a,i)},removeStyles({data:o}){return c(o,()=>"")}};const f={unset:"\x1B[0m",black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m",gray:"\x1B[90m"};function a(o){const r=o.replace(/color:\s*(\w+).*/,"$1").toLowerCase();return f[r]||""}function i(o){return o+f.unset}function c(o,r,e){const t={};return o.reduce((s,n,l,u)=>{if(t[l])return s;if(typeof n=="string"){let p=l,h=!1;n=n.replace(/%[1cdfiOos]/g,d=>{if(p+=1,d!=="%c")return d;const v=u[p];return typeof v=="string"?(t[p]=!0,h=!0,r(v,n)):d}),h&&e&&(n=e(n))}return s.push(n),s},[])}return te}var re,Te;function jt(){if(Te)return re;Te=1;const{concatFirstStringElements:f,format:a}=it(),{maxDepth:i,toJSON:c}=N(),{applyAnsiStyles:o,removeStyles:r}=de(),{transform:e}=L(),t={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};re=l;const n=`%c{h}:{i}:{s}.{ms}{scope}%c ${process.platform==="win32"?">":"›"} {text}`;Object.assign(l,{DEFAULT_FORMAT:n});function l(v){return Object.assign(g,{colorMap:{error:"red",warn:"yellow",info:"cyan",verbose:"unset",debug:"gray",silly:"gray",default:"unset"},format:n,level:"silly",transforms:[u,a,h,f,i,c],useStyles:process.env.FORCE_STYLES,writeFn({message:m}){(t[m.level]||t.info)(...m.data)}});function g(m){const E=e({logger:v,message:m,transport:g});g.writeFn({message:{...m,data:E}})}}function u({data:v,message:g,transport:m}){return typeof m.format!="string"||!m.format.includes("%c")?v:[`color:${d(g.level,m)}`,"color:unset",...v]}function p(v,g){if(typeof v=="boolean")return v;const E=g==="error"||g==="warn"?process.stderr:process.stdout;return E&&E.isTTY}function h(v){const{message:g,transport:m}=v;return(p(m.useStyles,g.level)?o:r)(v)}function d(v,g){return g.colorMap[v]||g.colorMap.default}return re}var ne,ke;function ot(){if(ke)return ne;ke=1;const f=Xe,a=D,i=j;class c extends f{constructor({path:t,writeOptions:s={encoding:"utf8",flag:"a",mode:438},writeAsync:n=!1}){super();y(this,"asyncWriteQueue",[]);y(this,"bytesWritten",0);y(this,"hasActiveAsyncWriting",!1);y(this,"path",null);y(this,"initialSize");y(this,"writeOptions",null);y(this,"writeAsync",!1);this.path=t,this.writeOptions=s,this.writeAsync=n}get size(){return this.getSize()}clear(){try{return a.writeFileSync(this.path,"",{mode:this.writeOptions.mode,flag:"w"}),this.reset(),!0}catch(t){return t.code==="ENOENT"?!0:(this.emit("error",t,this),!1)}}crop(t){try{const s=o(this.path,t||4096);this.clear(),this.writeLine(`[log cropped]${i.EOL}${s}`)}catch(s){this.emit("error",new Error(`Couldn't crop file ${this.path}. ${s.message}`),this)}}getSize(){if(this.initialSize===void 0)try{const t=a.statSync(this.path);this.initialSize=t.size}catch{this.initialSize=0}return this.initialSize+this.bytesWritten}increaseBytesWrittenCounter(t){this.bytesWritten+=Buffer.byteLength(t,this.writeOptions.encoding)}isNull(){return!1}nextAsyncWrite(){const t=this;if(this.hasActiveAsyncWriting||this.asyncWriteQueue.length===0)return;const s=this.asyncWriteQueue.join("");this.asyncWriteQueue=[],this.hasActiveAsyncWriting=!0,a.writeFile(this.path,s,this.writeOptions,n=>{t.hasActiveAsyncWriting=!1,n?t.emit("error",new Error(`Couldn't write to ${t.path}. ${n.message}`),this):t.increaseBytesWrittenCounter(s),t.nextAsyncWrite()})}reset(){this.initialSize=void 0,this.bytesWritten=0}toString(){return this.path}writeLine(t){if(t+=i.EOL,this.writeAsync){this.asyncWriteQueue.push(t),this.nextAsyncWrite();return}try{a.writeFileSync(this.path,t,this.writeOptions),this.increaseBytesWrittenCounter(t)}catch(s){this.emit("error",new Error(`Couldn't write to ${this.path}. ${s.message}`),this)}}}ne=c;function o(r,e){const t=Buffer.alloc(e),s=a.statSync(r),n=Math.min(s.size,e),l=Math.max(0,s.size-e),u=a.openSync(r,"r"),p=a.readSync(u,t,0,n,l);return a.closeSync(u),t.toString("utf8",0,p)}return ne}var se,ze;function Nt(){if(ze)return se;ze=1;const f=ot();class a extends f{clear(){}crop(){}getSize(){return 0}isNull(){return!0}writeLine(){}}return se=a,se}var ie,We;function xt(){if(We)return ie;We=1;const f=Xe,a=D,i=A,c=ot(),o=Nt();class r extends f{constructor(){super();y(this,"store",{});this.emitError=this.emitError.bind(this)}provide({filePath:s,writeOptions:n={},writeAsync:l=!1}){let u;try{if(s=i.resolve(s),this.store[s])return this.store[s];u=this.createFile({filePath:s,writeOptions:n,writeAsync:l})}catch(p){u=new o({path:s}),this.emitError(p,u)}return u.on("error",this.emitError),this.store[s]=u,u}createFile({filePath:s,writeOptions:n,writeAsync:l}){return this.testFileWriting({filePath:s,writeOptions:n}),new c({path:s,writeOptions:n,writeAsync:l})}emitError(s,n){this.emit("error",s,n)}testFileWriting({filePath:s,writeOptions:n}){a.mkdirSync(i.dirname(s),{recursive:!0}),a.writeFileSync(s,"",{flag:"a",mode:n.mode})}}return ie=r,ie}var oe,Ue;function It(){if(Ue)return oe;Ue=1;const f=D,a=j,i=A,c=xt(),{transform:o}=L(),{removeStyles:r}=de(),{format:e,concatFirstStringElements:t}=it(),{toString:s}=N();oe=l;const n=new c;function l(p,{registry:h=n,externalApi:d}={}){let v;return h.listenerCount("error")<1&&h.on("error",(b,w)=>{E(`Can't write to ${w}`,b)}),Object.assign(g,{fileName:u(p.variables.processType),format:"[{y}-{m}-{d} {h}:{i}:{s}.{ms}] [{level}]{scope} {text}",getFile:q,inspectOptions:{depth:5},level:"silly",maxSize:1024**2,readAllLogs:P,sync:!0,transforms:[r,e,t,s],writeOptions:{flag:"a",mode:438,encoding:"utf8"},archiveLogFn(b){const w=b.toString(),S=i.parse(w);try{f.renameSync(w,i.join(S.dir,`${S.name}.old${S.ext}`))}catch(F){E("Could not rotate log",F);const ct=Math.round(g.maxSize/4);b.crop(Math.min(ct,256*1024))}},resolvePathFn(b){return i.join(b.libraryDefaultDir,b.fileName)},setAppName(b){p.dependencies.externalApi.setAppName(b)}});function g(b){const w=q(b);g.maxSize>0&&w.size>g.maxSize&&(g.archiveLogFn(w),w.reset());const F=o({logger:p,message:b,transport:g});w.writeLine(F)}function m(){v||(v=Object.create(Object.prototype,{...Object.getOwnPropertyDescriptors(d.getPathVariables()),fileName:{get(){return g.fileName},enumerable:!0}}),typeof g.archiveLog=="function"&&(g.archiveLogFn=g.archiveLog,E("archiveLog is deprecated. Use archiveLogFn instead")),typeof g.resolvePath=="function"&&(g.resolvePathFn=g.resolvePath,E("resolvePath is deprecated. Use resolvePathFn instead")))}function E(b,w=null,S="error"){const F=[`electron-log.transports.file: ${b}`];w&&F.push(w),p.transports.console({data:F,date:new Date,level:S})}function q(b){m();const w=g.resolvePathFn(v,b);return h.provide({filePath:w,writeAsync:!g.sync,writeOptions:g.writeOptions})}function P({fileFilter:b=w=>w.endsWith(".log")}={}){m();const w=i.dirname(g.resolvePathFn(v));return f.existsSync(w)?f.readdirSync(w).map(S=>i.join(w,S)).filter(b).map(S=>{try{return{path:S,lines:f.readFileSync(S,"utf8").split(a.EOL)}}catch{return null}}).filter(Boolean):[]}}function u(p=process.type){switch(p){case"renderer":return"renderer.log";case"worker":return"worker.log";default:return"main.log"}}return oe}var ae,Be;function Mt(){if(Be)return ae;Be=1;const{maxDepth:f,toJSON:a}=N(),{transform:i}=L();ae=c;function c(o,{externalApi:r}){return Object.assign(e,{depth:3,eventId:"__ELECTRON_LOG_IPC__",level:o.isDev?"silly":!1,transforms:[a,f]}),r!=null&&r.isElectron()?e:void 0;function e(t){var s;((s=t==null?void 0:t.variables)==null?void 0:s.processType)!=="renderer"&&(r==null||r.sendIpc(e.eventId,{...t,data:i({logger:o,message:t,transport:e})}))}}return ae}var ce,Je;function Tt(){if(Je)return ce;Je=1;const f=ht,a=dt,{transform:i}=L(),{removeStyles:c}=de(),{toJSON:o,maxDepth:r}=N();ce=e;function e(t){return Object.assign(s,{client:{name:"electron-application"},depth:6,level:!1,requestOptions:{},transforms:[c,o,r],makeBodyFn({message:n}){return JSON.stringify({client:s.client,data:n.data,date:n.date.getTime(),level:n.level,scope:n.scope,variables:n.variables})},processErrorFn({error:n}){t.processMessage({data:[`electron-log: can't POST ${s.url}`,n],level:"warn"},{transports:["console","file"]})},sendRequestFn({serverUrl:n,requestOptions:l,body:u}){const h=(n.startsWith("https:")?a:f).request(n,{method:"POST",...l,headers:{"Content-Type":"application/json","Content-Length":u.length,...l.headers}});return h.write(u),h.end(),h}});function s(n){if(!s.url)return;const l=s.makeBodyFn({logger:t,message:{...n,data:i({logger:t,message:n,transport:s})},transport:s}),u=s.sendRequestFn({serverUrl:s.url,requestOptions:s.requestOptions,body:Buffer.from(l,"utf8")});u.on("error",p=>s.processErrorFn({error:p,logger:t,message:n,request:u,transport:s}))}}return ce}var le,He;function at(){if(He)return le;He=1;const f=nt(),a=Ct(),i=Rt(),c=jt(),o=It(),r=Mt(),e=Tt();le=t;function t({dependencies:s,initializeFn:n}){var u;const l=new f({dependencies:s,errorHandler:new a,eventLogger:new i,initializeFn:n,isDev:(u=s.externalApi)==null?void 0:u.isDev(),logId:"default",transportFactories:{console:c,file:o,ipc:r,remote:e},variables:{processType:"main"}});return l.default=l,l.Logger=f,l.processInternalErrorFn=p=>{l.transports.console.writeFn({message:{data:["Unhandled electron-log error",p],level:"error"}})},l}return le}var ue,Ve;function kt(){if(Ve)return ue;Ve=1;const f=O,a=_t(),{initialize:i}=$t(),c=at(),o=new a({electron:f}),r=c({dependencies:{externalApi:o},initializeFn:i});ue=r,o.onIpc("__ELECTRON_LOG__",(t,s)=>{s.scope&&r.Logger.getInstance(s).scope(s.scope);const n=new Date(s.date);e({...s,date:n.getTime()?n:new Date})}),o.onIpcInvoke("__ELECTRON_LOG__",(t,{cmd:s="",logId:n})=>{switch(s){case"getOptions":return{levels:r.Logger.getInstance({logId:n}).levels,logId:n};default:return e({data:[`Unknown cmd '${s}'`],level:"error"}),{}}});function e(t){var s;(s=r.Logger.getInstance(t))==null||s.processMessage(t)}return ue}var fe,Ge;function zt(){if(Ge)return fe;Ge=1;const f=st(),a=at(),i=new f;return fe=a({dependencies:{externalApi:i}}),fe}const Wt=typeof process>"u"||process.type==="renderer"||process.type==="worker",Ut=typeof process=="object"&&process.type==="browser";Wt?(rt(),R.exports=qt()):Ut?R.exports=kt():R.exports=zt();var Bt=R.exports;const Jt=Ke(Bt);Jt.initialize();St&&O.app.quit();const Ye=()=>{const f=new O.BrowserWindow({width:1200,height:800,webPreferences:{preload:ge.join(__dirname,"preload.js")}});f.loadFile(ge.join(__dirname,"../renderer/main_window/index.html")),f.webContents.openDevTools()};O.app.whenReady().then(()=>{Ye(),O.app.on("activate",()=>{O.BrowserWindow.getAllWindows().length===0&&Ye()})});O.app.on("window-all-closed",()=>{process.platform!=="darwin"&&O.app.quit()});
